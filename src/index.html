<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <title>StreamElements - Ground Control</title>
    <script>
        if (typeof module === 'object') {
            window.module = module;
            module = undefined;
        }
    </script>
    <script src="js/jquery-3.1.1.min.js"></script>
    <script>
        if (window.module) module = window.module;
    </script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="../node_modules/material-design-lite/material.min.css">
    <script src="../node_modules/material-design-lite/material.min.js"></script>
    <!-- mdl-selectfield -->
    <link rel="stylesheet" href="../node_modules/mdl-selectfield/dist/mdl-selectfield.min.css">
    <script defer src="../node_modules/mdl-selectfield/dist/mdl-selectfield.min.js"></script>
    <!---->
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/settings.css">
    <script>
        const node_fs = require("fs");
        const got = require("got");
        const path = require("path");
        const {
            shell,
            remote
        } = require("electron");
        const configFile = path.normalize(__dirname.replace(/[\\|\/]?resources.*/, "").replace(/app.*/, "").replace(/[\/|\\]src.*$/, "") + "/config.json");
        Object.prototype.getKeyByValue = function(value) {
            for (var prop in this) {
                if (this.hasOwnProperty(prop)) {
                    if (this[prop] === value)
                        return prop;
                }
            }
        }
        var pack;
        if (node_fs.existsSync('./package.json')) {
            pack = JSON.parse(node_fs.readFileSync('./package.json', 'utf8'));
        } else if (node_fs.existsSync('./resources/app/package.json')) {
            pack = JSON.parse(node_fs.readFileSync('./resources/app/package.json', 'utf8'));
        } else if (node_fs.existsSync('./resources/app.asar')) {
            pack = JSON.parse(node_fs.readFileSync('./resources/app.asar/package.json', 'utf8'));
        } else if (node_fs.existsSync(__filename.replace(/src.*/, "") + "package.json")) {
            pack = JSON.parse(node_fs.readFileSync(__filename.replace(/src.*/, "") + "package.json", 'utf8'));
        }
        var lastFrame = "frame_main";
    </script>
</head>

<body>
    <div id="frame_updates" class="frames">
        <div class="centered-axis-xy">
            <div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active center_loader"></div>
        </div>
    </div>
    <div id="buttons" style="display: none;">
        <button style="display: none;" class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect gotoSR gotoButton">
                <i class="material-icons">music_note</i>
            </button>
        <button id="goto_settings" class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect">
                <i class="material-icons">settings</i>
            </button>
        <div class="mdl-tooltip" data-mdl-for="goto_settings">
            Settings
        </div>
    </div>
    <div id="frame_main" style="display: none;" class="frames">
        <webview id="pop_frame" src=""></webview>
        <p id="noToken">To use the activity feed, please enter the <a>JWT Token</a> in the settings menu.</p>
        <p id="invToken">You entered a invalid <a>JWT Token</a>.</p>
    </div>
    <div id="frame_sr" style="display: none;" class="frames">
        <webview id="sr_frame" src=""></webview>
        <div class="mdl-tooltip" data-mdl-for="goto_settings">
            Settings
        </div>
    </div>
    <div id="frame_settings" style="display: none; z-index: 3;" class="frames">
        <button id="goto_back" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored"><i class="material-icons">arrow_back</i></button>
        <h3 id="title">Settings</h3>
        <div id="settings">
            <h4>Authentication</h4>

            <!-- JWT -->
            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" style="width: calc(100vw - 4.3em);">
                <input class="mdl-textfield__input" type="text" id="jwt" pattern=".{36}\.[^\.]+\.[^\.]+">
                <label class="mdl-textfield__label" for="jwt">Your JWT Token...</label>
            </div>
            <label class="mdl-icon-toggle mdl-js-icon-toggle mdl-js-ripple-effect" for="show-jwt" onclick="if((!$('#jwt').val()) || $('#jwt').val() === '') { return false; }">
                    <input type="checkbox" id="show-jwt" class="mdl-icon-toggle__input">
                    <i class="mdl-icon-toggle__label material-icons">visibility</i>
                </label>
            <p>You can find it under <a onclick="shell.openExternal('https://streamelements.com/dashboard/account/information');" style="cursor: pointer;">My Account</a></p>


            <h4>Keybindings</h4>

            <!-- Skip alert -->
            <h6>Skip alert:</h6>
            <div class="inputF">
                <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect clearThis">
                        <i class="material-icons">clear</i>
                    </button>
                <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" style="width: 20em;margin-right: 1em;">
                    <input class="mdl-textfield__input autoC" type="text" id="skip_alert">
                    <label class="mdl-textfield__label" for="skip_alert">Key...</label>
                </div>
            </div>
            <div class="clear"></div>

            <!-- Skip song -->
            <h6>Skip song:</h6>
            <div class="inputF">
                <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect clearThis">
                        <i class="material-icons">clear</i>
                    </button>
                <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" style="width: 20em;margin-right: 1em;">
                    <input class="mdl-textfield__input autoC" type="text" id="skip_song">
                    <label class="mdl-textfield__label" for="skip_song">Key...</label>
                </div>
            </div>
            <div class="clear"></div>

            <!-- Stop/Resume alerts -->
            <!--<h6>Stop/Resume alerts:</h6>
                <div class="inputF">
                    <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect clearThis">
                        <i class="material-icons">clear</i>
                    </button>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" style="width: 20em;margin-right: 1em;">
                        <input class="mdl-textfield__input autoC" type="text" id="SnR_alert">
                        <label class="mdl-textfield__label" for="SnR_alert">Key...</label>
                    </div>
                </div>
                <div class="clear"></div>-->

            <!-- Stop/Start song -->
            <!--<h6>Stop/Resume song:</h6>
                <div class="inputF">
                    <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect clearThis">
                        <i class="material-icons">clear</i>
                    </button>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" style="width: 20em;margin-right: 1em;">
                        <input class="mdl-textfield__input autoC" type="text" id="SnR_song">
                        <label class="mdl-textfield__label" for="SnR_song">Key...</label>
                    </div>
                </div>
                <div class="clear"></div>
                -->

            <div id="key-info"><a style="cursor: pointer;">Show info about keybindings</a></div>
        </div>
        <a id="version"></a>
    </div>
    <script src="js/index.js"></script>
    <script src="js/settings.js"></script>
    <script src="modules/settings-shortcuts.js"></script>
</body>

</html>